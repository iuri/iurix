ad_page_contract {

    @author iuri sampaio (iuri.sampaio@gmail.com)
    @date 2010-10-29
} {
    folder_id ""
}

# Document's search form 
ad_form -name search -export {} -action list -form {
    {keyword:text(text),optional {label "[_ documents.Search]"} }
}

set admin_p [permission::permission_p -party_id [ad_conn user_id] -object_id [ad_conn package_id] -privilege admin]

set package_id [ad_conn package_id]
set object_id [ad_conn object_id] 

if {$folder_id eq ""} {
    set root_folder_id [fs_get_root_folder -package_id $package_id]

    db_multirow -extend {type_url} document_types select_folders {} {
	set type_url [export_vars -base "documents" {folder_id}]
	
    }
} else {
    
    db_multirow -extend {item_url} folder_content select_folder_content {} {
	set item_url [export_vars -base "" {item_id}]
	
    }
}