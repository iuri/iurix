***************
*** 10,15 ****
  } {
      album_id:integer,notnull
      {confirmed_p "f"}
  } -validate {
      valid_album -requires {album_id:integer} {
  	if [string equal [pa_is_album_p $album_id] "f"] {
--- 10,16 ----
  } {
      album_id:integer,notnull
      {confirmed_p "f"}
+     return_url:optional
  } -validate {
      valid_album -requires {album_id:integer} {
  	if [string equal [pa_is_album_p $album_id] "f"] {
***************
*** 44,50 ****
  
      pa_flush_photo_in_album_cache $album_id
  
-     ad_returnredirect "?folder_id=$parent_folder_id"
      ad_script_abort
  
  } else {
--- 45,57 ----
  
      pa_flush_photo_in_album_cache $album_id
  
+     # HAM : added return_url
+     if { ![exists_and_not_null return_url] } {
+         #redirect back to index page with parent_id
+         ad_returnredirect "?folder_id=$parent_folder_id"
+     } else {
+         ad_returnredirect $return_url
+     }
      ad_script_abort
  
  } else {
