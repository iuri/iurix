***************
*** 15,20 ****
      {description [db_null]}
      {caption [db_null]}
      {story [db_null]}
  } -validate {
      valid_album -requires {album_id:integer} {
  	if [string equal [pa_is_album_p $album_id] "f"] {
--- 15,21 ----
      {description [db_null]}
      {caption [db_null]}
      {story [db_null]}
+     return_url:optional
  } -validate {
      valid_album -requires {album_id:integer} {
  	if [string equal [pa_is_album_p $album_id] "f"] {
***************
*** 70,73 ****
  # page used as part of redirect so user returns to the album page containing the newly uploaded photo
  set page [pa_page_of_photo_in_album [lindex $new_photo_ids 0] $album_id]
  
- ad_returnredirect "album?album_id=$album_id&page=$page"
--- 71,82 ----
  # page used as part of redirect so user returns to the album page containing the newly uploaded photo
  set page [pa_page_of_photo_in_album [lindex $new_photo_ids 0] $album_id]
  
+ 
+ # HAM : added return_url
+ if { ![exists_and_not_null return_url] } {
+     ad_returnredirect "album?album_id=$album_id&page=$page"
+ } else {
+     ad_returnredirect $return_url
+ }
+ 
+ 
