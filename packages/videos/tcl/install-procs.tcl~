# packages/videos/tcl/install-procs.tcl

ad_library {

    Videos Install Library

    callback implementations for videos
    
    @author iuri sampaio (iuri.sampaio@gmail.com)
    @creation-date 2010-06-09
}


namespace eval videos::install {}

ad_proc -private videos::install::add_categories {
    {-package_id ""}
} {
    a callback install that adds standard tree, categories ans sub-categories related to video 
} {

    #create category tree
    set tree_id [category_tree::add -name videos]
    
    set parent_id [category::add -tree_id $tree_id -parent_id [db_null] -name #videos.Type# -description #videos.Type_of_Video#]
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.Interview# -description #videos.Interview#
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.Institutional# -description #videos.desc_Inst#
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.Ads# -description #videos.desc_Ads#
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.Class# -description #videos.desc_Class#
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.Documentary# -description #videos.desc_Docum#
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.Speech# -description #videos.desc_Speech#
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.Debate# -description #videos.desc_Debate#

    set parent_id [category::add -tree_id $tree_id -parent_id [db_null] -name #videos.License# -description #videos.Type_of_License#]
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.CC# -description #videos.desc_CC3#
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.DGPL# -description #videos.desc_DGPL#
    category::add -tree_id $tree_id -parent_id $parent_id -name #videos.GPL# -description #videos.desc_GPL#
    
    set object_id [db_list select_object_id "
	select object_id 
	from acs_objects 
	where object_type = 'apm_package' 
	and package_id = $package_id
    "]

    category_tree::map -tree_id $tree_id -object_id $object_id
}


