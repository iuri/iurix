ad_page_contract {}


set client_id "AWPWKH8kF7PmtngnMwIfjrUszGvPLtttsWQQ8FVpufXpcsED4tguctP1ikBC73jimnmcRtF580nE_Hhg"
set sercret "EAKxYZcZlJfH1wEzd0ovJpg2pJHzHwYdIFf45bKSi2x5FdfzPxLDa30z2cPvJLSA_Y4SKRNOk410r3Tg"

# lassign [pp_status_data $status] base_url client_id secret
set url "https://api.sandbox.paypal.com/v1/oauth2/token"
if {[catch {set result [exec curl -s $url \
			    -H "Accept: application/json" \
			    -H "Accept-Language: en_US" \
			    -u "${client_id}:${secret}" \
			    -d "grant_type=client_credentials"]} errmsg]} {
    set result ""
} else {
    package require json
    set result [json::json2dict $result]
    set result [list [dict get $result access_token] [dict get $result expires_in]]
}


ns_log Notice "RESULT \n $result"

